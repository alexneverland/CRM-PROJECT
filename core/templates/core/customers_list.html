{# core/templates/core/customers_list.html #}

{% extends "core/base.html" %}

{% block title %}Î›Î¯ÏƒÏ„Î± Î ÎµÎ»Î±Ï„ÏÎ½{% endblock %}

{% block content %}

<p><a href="{% url 'customer_create' %}" class="btn btn-primary">â• Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· ÎÎ­Î¿Ï… Î ÎµÎ»Î¬Ï„Î·</a>
    <a href="{% url 'export_customers_excel' %}?q={{ request.GET.q|default:'' }}" class="btn btn-success">
        <i class="bi bi-file-earmark-excel"></i> Î•Î¾Î±Î³Ï‰Î³Î® ÏƒÎµ Excel
    </a>
</p>
<form method="get" action="{% url 'customer_list' %}" class="mb-3">
    <div class="input-group">
        <input type="text" name="q" value="{{ request.GET.q|default:'' }}" class="form-control" placeholder="Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Î¼Îµ ÏŒÎ½Î¿Î¼Î±, ÎµÏ„Î±Î¹ÏÎµÎ¯Î±, ÎºÏ‰Î´Î¹ÎºÏŒ...">
        <button type="submit" class="btn btn-outline-secondary">Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·</button>
        {% if request.GET.q %}
            <a href="{% url 'customer_list' %}" class="btn btn-outline-danger">ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚</a>
        {% endif %}
    </div>
</form>
<hr class="mb-4">


<h2>ğŸ‘¤ Î›Î¯ÏƒÏ„Î± Î ÎµÎ»Î±Ï„ÏÎ½</h2>

<style>
    .customer-list ul { list-style-type: none; padding-left: 0; }
    .customer-list li {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.75rem 0; /* Î›Î¯Î³Î¿ Î¼Î¹ÎºÏÏŒÏ„ÎµÏÎ¿ padding */
        border-bottom: 1px solid #dee2e6; /* Î§ÏÏÎ¼Î± Bootstrap Î³Î¹Î± border */
    }
    .customer-list li:last-child { border-bottom: none; }

    .customer-item-name {
        flex-grow: 1;
        margin-right: 1rem; /* Bootstrap spacing unit */
    }
    .customer-item-name a {
        text-decoration: none;
        color: #212529; /* Bootstrap default text color */
        font-weight: 500; /* Î›Î¯Î³Î¿ Ï€Î¹Î¿ Î­Î½Ï„Î¿Î½Î¿ */
    }
    .customer-item-name a:hover {
        color: #0056b3; /* Î Î¹Î¿ ÏƒÎºÎ¿ÏÏÎ¿ Î¼Ï€Î»Îµ ÏƒÏ„Î¿ hover */
    }
    .customer-code { /* Î ÏÏŒÏƒÎ¸ÎµÏ„Î· ÎºÎ»Î¬ÏƒÎ· Î³Î¹Î± Ï„Î¿Î½ ÎºÏ‰Î´Î¹ÎºÏŒ Î³Î¹Î± Î´Î¹Î±ÎºÏÎ¹Ï„ÏŒ styling Î±Î½ Ï‡ÏÎµÎ¹Î±ÏƒÏ„ÎµÎ¯ */
        font-size: 0.875em;
        color: #6c757d; /* Bootstrap secondary text color */
    }

    .customer-actions-inline {
        display: flex;
        align-items: center;
        gap: 0.5rem; /* Bootstrap spacing unit */
    }
    /* Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î¿ÏÎ¼Îµ Ï„Î¹Ï‚ ÎºÎ»Î¬ÏƒÎµÎ¹Ï‚ btn Ï„Î·Ï‚ Bootstrap Î³Î¹Î± ÏƒÏ…Î½Î­Ï€ÎµÎ¹Î± */
    .customer-actions-inline .btn-icon { /* Î“Î¹Î± ÎµÎ¹ÎºÎ¿Î½Î¯Î´Î¹Î± ÎµÏ€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚/Î´Î¹Î±Î³ÏÎ±Ï†Î®Ï‚ */
        padding: 0.375rem 0.75rem; /* Î¤Ï…Ï€Î¹ÎºÏŒ padding Î³Î¹Î± sm buttons */
    }
</style>

{% if customers %}
    <div class="customer-list">
        <ul>
            {% for customer in customers %}
                
                <li class="searchable-row has-context-menu" data-id="{{ customer.pk }}" data-type="customer">    
                    <div class="customer-item-name">
                         <a href="{% url 'customer_detail' customer.pk %}">
                             {{ customer.first_name }} {{ customer.last_name }} {% if customer.company_name %}({{ customer.company_name }}){% endif %}
                         </a>
                         <div class="customer-code">ÎšÏ‰Î´Î¹ÎºÏŒÏ‚: {{ customer.code }}</div>
                    </div>

                    <div class="customer-actions-inline">
                        <a href="{% url 'customer_edit' customer.pk %}" class="btn btn-sm btn-outline-primary btn-icon" title="Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±">âœï¸</a>
                        <form action="{% url 'customer_delete' customer.pk %}" method="post" class="delete-form d-inline">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-sm btn-outline-danger btn-icon" title="Î”Î¹Î±Î³ÏÎ±Ï†Î®">ğŸ—‘ï¸</button>
                        </form>
                    </div>
                </li>
            {% endfor %}
        </ul>
    </div>
    {% include "core/partials/pagination_controls.html" with page_obj=customers %}
{% else %}
    <div class="alert alert-info mt-3" role="alert">
        {% if request.GET.q %}
            Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ Ï€ÎµÎ»Î¬Ï„ÎµÏ‚ Î³Î¹Î± Ï„Î·Î½ Î±Î½Î±Î¶Î®Ï„Î·ÏƒÎ· "{{ request.GET.q }}".
        {% else %}
            Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Ï€ÎµÎ»Î¬Ï„ÎµÏ‚ ÎºÎ±Ï„Î±Ï‡Ï‰ÏÎ·Î¼Î­Î½Î¿Î¹.
        {% endif %}
    </div>
{% endif %}

{% endblock %}